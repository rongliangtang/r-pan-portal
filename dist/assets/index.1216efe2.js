/* empty css                  */import{v as F}from"./el-loading.674c0a2b.js";import{E as $,a as A}from"./el-tag.8850cd5d.js";import"./el-tooltip.f8f0cf31.js";import{E as H}from"./el-scrollbar.9146fd3f.js";import{E as j}from"./el-link.86848b9e.js";import{s as b}from"./index.e3609a70.js";import{az as G,r as _,Z as W,$ as Z,F as q,W as J,o as w,g as K,C as n,M as t,w as o,S as P,f as Q,aD as c,V as S,k as y,t as C,aG as R,a0 as X,a1 as Y}from"./index.dfea662d.js";import{u as ee}from"./index.0d3d1e52.js";import{_ as te}from"./_plugin-vue_export-helper.cdc0426e.js";import"./debounce.97df106c.js";const ae=i=>(X("data-v-c5bd3e1f"),i=i(),Y(),i),oe={class:"share-button-content"},ne={class:"cancel-button-content"},se={class:"share-list-content"},re={class:"share-name-content"},le=ae(()=>n("i",{class:"fa fa-share-alt",style:{"margin-right":"15px","font-size":"20px",cursor:"pointer"}},null,-1)),ce={style:{cursor:"pointer"}},ie={class:"share-operation-content"},he={__name:"index",setup(i){const{toClipboard:x}=ee(),E=G(),m=_([]),k=_(window.innerHeight-200),h=_([]),d=_(!0),f=()=>{d.value=!0,b.getShares(e=>{d.value=!1,m.value=e.data},e=>{d.value=!1,c.error(e.message)})};W(()=>{E.setSearchFlag(!1),f()});const g=e=>{R.confirm("\u5206\u4EAB\u53D6\u6D88\u540E\u5C06\u4E0D\u53EF\u6062\u590D\uFF0C\u60A8\u786E\u5B9A\u8FD9\u6837\u505A\u5417\uFF1F","\u53D6\u6D88\u5206\u4EAB",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{b.cancelShare({shareIds:e},()=>{c.success("\u53D6\u6D88\u5206\u4EAB\u6210\u529F"),f()},a=>{c.error(a.message)})})},B=()=>{if(h.value&&h.value.length>0){let e=new Array;h.value.forEach(a=>{e.push(a.shareId)}),g(e.join("__,__"));return}c.error("\u8BF7\u9009\u62E9\u8981\u53D6\u6D88\u7684\u5206\u4EAB")},T=e=>{g(e.shareId)},I=e=>{h.value=e},M=(e,a,s,p)=>{S.showOperation(s)},D=(e,a,s,p)=>{S.hiddenOperation(s)},z=(e,a,s,p)=>e.shareStatus===1?"\u6709\u5206\u4EAB\u6587\u4EF6\u88AB\u5220\u9664":e.shareDayType===0?"\u6C38\u4E45\u6709\u6548":e.shareEndTime+"\u5230\u671F",L=async e=>{try{let a="\u94FE\u63A5\uFF1A"+e.shareUrl+`
\u63D0\u53D6\u7801\uFF1A`+e.shareCode+`
\u8D76\u5FEB\u5206\u4EAB\u7ED9\u5C0F\u4F19\u4F34\u5427\uFF01`;await x(a),c.success("\u590D\u5236\u6210\u529F")}catch(a){console.error(a),c.error("\u590D\u5236\u5931\u8D25")}};return(e,a)=>{const s=Z("SwitchButton"),p=q,u=J,r=$,v=H,N=j,U=A,V=F;return w(),K("div",null,[n("div",oe,[n("div",ne,[t(u,{type:"danger",size:"default",round:"",onClick:B},{default:o(()=>[y(" \u53D6\u6D88\u5206\u4EAB "),t(p,{class:"el-icon--right"},{default:o(()=>[t(s)]),_:1})]),_:1})])]),n("div",se,[P((w(),Q(U,{ref:"shareTable",data:m.value,height:k.value,"tooltip-effect":"dark",style:{width:"100%"},onSelectionChange:I,onCellMouseEnter:M,onCellMouseLeave:D},{default:o(()=>[t(r,{type:"selection",width:"55"}),t(r,{label:"\u5206\u4EAB\u540D\u79F0",prop:"shareName",sortable:"","show-overflow-tooltip":"","min-width":"750"},{default:o(l=>[n("div",re,[le,n("span",ce,C(l.row.shareName),1)]),n("div",ie,[t(v,{class:"item",effect:"light",content:"\u590D\u5236\u94FE\u63A5",placement:"top"},{default:o(()=>[t(u,{type:"success",size:"small",circle:"",onClick:O=>L(l.row),icon:"Link"},null,8,["onClick"])]),_:2},1024),t(v,{class:"item",effect:"light",content:"\u53D6\u6D88\u5206\u4EAB",placement:"top"},{default:o(()=>[t(u,{type:"danger",size:"small",circle:"",onClick:O=>T(l.row),icon:"SwitchButton"},null,8,["onClick"])]),_:2},1024)])]),_:1}),t(r,{prop:"shareUrl",sortable:"",align:"center",label:"\u5206\u4EAB\u94FE\u63A5","min-width":"300"},{default:o(l=>[t(N,{type:"primary",href:l.row.shareUrl,target:"_blank"},{default:o(()=>[y(C(l.row.shareUrl.substring(0,30)+"..."),1)]),_:2},1032,["href"])]),_:1}),t(r,{prop:"shareCode",sortable:"",align:"center",label:"\u63D0\u53D6\u7801","min-width":"140"}),t(r,{prop:"createTime",sortable:"",align:"center",label:"\u5206\u4EAB\u65F6\u95F4","min-width":"240"}),t(r,{prop:"shareStatus",sortable:"",label:"\u5206\u4EAB\u72B6\u6001","min-width":"240",align:"center",formatter:z})]),_:1},8,["data","height"])),[[V,d.value]])])])}}},ye=te(he,[["__scopeId","data-v-c5bd3e1f"]]);export{ye as default};
